<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>etamina.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/JXAnimation.Audio.html">JXAnimation.Audio</a></li>
            
                <li><a href="../classes/Log.html">Log</a></li>
            
                <li><a href="../classes/Tab.html">Tab</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/JXAnimate.Audio.html">JXAnimate.Audio</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: etamina.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">

/* ===========================================================================
 * etamina == animate
 *
 * @description
 * A CSS animation Engine and Library
 *
 * @author minren 
 * ===========================================================================
 * 
 */

/**
 * @description
 *
 */
var etamina = (function () {

    var core = {
            id: &quot;etamina&quot;,
            name: &quot;etamina&quot;,
            description: &quot;A CSS animation Engine and Library&quot;,
            version: &quot;0.1&quot;,

            prefix: &quot;&quot;,
            prefixJS: &quot;&quot;,

            elems: null,

            format: {},
            helper: {},
            effects: {},

            debug: true,

            originalCssClasses: {},
            AnimatingClasses: {},
            keyframeRules:{},
            doNotDeleteKeyframes:{}, //不需要删除的动画名称，一般是静态CSS文件中的动画。
            animElementList: [],

            /**
             * Returns array of HTML elements by string, HTML elements or string array.
             */
            getHTMLelements: function (params) {
                var elems = [],
                    each = function (arr, func) {
                        Array.prototype.forEach.apply(arr, [func]);
                    },
                    push = function (v) {
                        elems.push(v);
                    },
                    lookup = function (query) {
                        if (typeof query != &#x27;string&#x27;) return [];
                        var result = document.getElementById(query);
                        return result ? [result] : document.querySelectorAll(query);
                    };

                if (typeof params === &quot;string&quot;) {
                    each(lookup(params), push);
                }
                else if (params.length === undefined) {
                    elems.push(params); // myElem1
                }
                else {
                    each(params, function(param) {
                        if (param.nodeType &amp;&amp; param.nodeType !== 3) {
                            elems.push(param);
                        }
                        else {
                            each(lookup(param), push);
                        }
                    });
                }
                each(elems,function(elem){
                    if(!elem.id || elem.id == &#x27;&#x27; || elem.id === undefined){
                        elem.id = elem.type + &#x27;_&#x27; + (new Date()).getTime();
                    }
                });

                return elems;
            },
            /**
             * Set browser css &amp; JS prefix
             */
            initPrefix: function () {
                var el = document.createElement(&quot;div&quot;);

                // Safari 4+, iOS Safari 3.2+, Chrome 2+, and Android 2.1+
                if (&quot;webkitAnimation&quot; in el.style) {
                    this.prefix = &quot;-webkit-&quot;;
                    this.prefixJS = &quot;webkit&quot;;
                }
                // Firefox 5+
                else if (&quot;MozAnimation&quot; in el.style) {
                    this.prefix = &quot;-moz-&quot;;
                    this.prefixJS = &quot;Moz&quot;;
                }
                // Internet Explorer 10+
                else if (&quot;MSAnimation&quot; in el.style) {
                    this.prefix = &quot;-ms-&quot;;
                    this.prefixJS = &quot;MS&quot;;
                }
                // Opera 12+
                else if (&quot;OAnimation&quot; in el.style || &quot;OTransform&quot; in el.style) {
                    this.prefix = &quot;-o-&quot;;
                    this.prefixJS = &quot;O&quot;;
                }
                else {
                    this.prefix = &quot;&quot;;
                    this.prefixJS = &quot;&quot;;
                }

                if (this.debug) {
                    console.log(&quot;prefix=&quot; + this.prefix, &quot;prefixJS=&quot; + this.prefixJS);
                }

                return;
            },

            /**
             * Get the document height
             */
            docHeight: function () {
                var D = document;

                return Math.max(
                    Math.max(D.body.scrollHeight, D.documentElement.scrollHeight), 
                    Math.max(D.body.offsetHeight, D.documentElement.offsetHeight), 
                    Math.max(D.body.clientHeight, D.documentElement.clientHeight)
                    );
            },


            /**
             * Insert CSS keyframe rule
             */
            insertCSS: function (rule) {
                var sheets = document.styleSheets;

                if (sheets &amp;&amp; sheets.length) {
                    for (var i = sheets.length - 1; i &gt;= 0; i--) {
                        try {
                            sheets[i].insertRule(rule, 0);
                            break;
                        }
                        catch (ex) {
                            console.warn(ex.message, rule);
                        }
                    };
                }
                else {
                    var style = document.createElement(&quot;style&quot;);
                    style.innerHTML = rule;
                    document.head.appendChild(style);
                }

                return;
            },

            /**
             * Delete CSS keyframe rule
             */
            deleteCSS: function (ruleName) {
                var cssrules = (document.all) ? &quot;rules&quot; : &quot;cssRules&quot;,
                    i,sheets = document.styleSheets;
                if (sheets &amp;&amp; sheets.length) {
                    sheets:for (var j = sheets.length - 1; j &gt;= 0; j--) {
                        if(sheets[j][cssrules].length){
                            rules:for (i = 0; i &lt; sheets[j][cssrules].length; i += 1) {
                                var rule = sheets[j][cssrules][i];
                                if (rule.name === ruleName || rule.selectorText === &#x27;.&#x27;+ruleName) {
                                    sheets[j].deleteRule(i);
                                    if (this.debug) {
                                        console.log(&quot;Deleted keyframe: &quot; + ruleName);
                                    }
                                    break sheets;
                                    break rules;
                                }                            
                            }
                        }
                    }
                }

                return;
            },

            /**
             * Clear animation settings
             */
            clearAnimation: function (evt) {
                console.info(&quot;_clearAnimation&quot;, this, evt.srcElement.id, evt.animationName, evt.elapsedTime);

                etamina.animElementList[this.id] = false;

                //恢复元素原有的class属性。
                etamina.restoreCssClass(this);
                
                //结束时删除 动画class。 动画class也要记录。
                var classname = etamina.popAnimateClassName(this.id);
                etamina.deleteCSS(classname);


                // 删除关键帧的css。
                if(evt.animationName in etamina.doNotDeleteKeyframes){

                }
                else{
                    etamina.deleteCSS(evt.animationName);
                }



                return;
            },
            /**
             * initialize animation playing param
             */
            initPlayParam: function(params,animType){

                var animType = animType || &#x27;Any&#x27;,
                    params = params || {};

                params.animType = params.animType||animType;                
                params.delay = params.delay || &#x27;0ms&#x27;;
                params.duration = params.duration || &#x27;1s&#x27;;
                params.timing = params.timing || &#x27;linear&#x27;;
                params.iteration = params.iteration || &#x27;1&#x27;;
                params.direction = params.direction || &#x27;normal&#x27;;
                params.playstate = params.playstate || &quot;running&quot;;

                params.perspective = params.perspective || &quot;1000px&quot;;
                params.perspectiveOrigin = params.perspectiveOrigin || &quot;50% 50%&quot;;
                params.backfaceVisibility = params.backfaceVisibility || &quot;visible&quot;;
                return params;
            },


            /**
             *生成用于在element上应用动画效果class css
             */
             getAnimationClassRule: function(params,animSetting){
                var 
                className = params.animType + &#x27;-&#x27; +(new Date()).getTime() + &quot;-&quot; + Math.floor(Math.random() * 1000),
                css=&#x27;&#x27;,domino,dominoDelay=0,newDelay;

                if(params.toDelete &amp;&amp; params.toDelete.length&gt;0){
                    for(var i=0,len = params.toDelete.length;i&lt;len;i++)
                    {
                        var attr = params.toDelete[i];
                        delete params[attr];
                    }
                }
                
                newDelay = etamina.format.fromTime(params.delay);

                if(animSetting.domino){
                    domino = etamina.format.fromTime(animSetting.domino);
                    dominoDelay = domino * animSetting.index;
                    newDelay+= dominoDelay;
                }

                newDelay = etamina.format.toMilliSecond(newDelay);

                css += &#x27;.&#x27;+className+&#x27;{&#x27;+&#x27;\n&#x27;;

                css += &#x27;\t&#x27;+etamina.prefix+&#x27;animation-name:&#x27;+params.name+&#x27;;\n&#x27;;
                if (&#x27;delay&#x27; in params) {
                    css += &#x27;\t&#x27;+etamina.prefix+&#x27;animation-delay:&#x27;+newDelay+&#x27;;\n&#x27;;
                }
                if (&#x27;duration&#x27; in params) {
                    css += &#x27;\t&#x27;+etamina.prefix+&#x27;animation-duration:&#x27;+params.duration+&#x27;;\n&#x27;;
                }
                if (&#x27;timing&#x27;) {
                    css += &#x27;\t&#x27;+etamina.prefix+&#x27;animation-timing-function:&#x27;+params.timing+&#x27;;\n&#x27;;
                }
                if (&#x27;iteration&#x27; in params) {
                    css += &#x27;\t&#x27;+etamina.prefix+&#x27;animation-iteration-count:&#x27;+params.iteration+&#x27;;\n&#x27;;
                }
                if (&#x27;direction&#x27; in params) {
                    css += &#x27;\t&#x27;+etamina.prefix+&#x27;animation-direction:&#x27;+params.direction+&#x27;;\n&#x27;;
                }
                if(&#x27;perspective&#x27; in params){
                    css += &#x27;\t&#x27;+etamina.prefix+&#x27;perspective:&#x27;+params.perspective+&#x27;;\n&#x27;;
                }
                if(&#x27;perspectiveOrigin&#x27; in params){
                    css += &#x27;\t&#x27;+etamina.prefix+&#x27;perspective-origin:&#x27;+params.perspectiveOrigin+&#x27;;\n&#x27;;
                }
                if(&#x27;backfaceVisibility&#x27; in params){
                    css += &#x27;\t&#x27;+etamina.prefix+&#x27;backface-visibility:&#x27;+params.backfaceVisibility+&#x27;;\n&#x27;;
                }

                css += &#x27;}\n&#x27; ;

                return {
                    name:className,
                    css:css
                };
             },

            saveCssClass : function(elem){
                if(elem &amp;&amp; elem.id &amp;&amp; elem.id!=&#x27;&#x27;){
                    this.originalCssClasses[elem.id] = elem.className;
                }
             },
            restoreCssClass : function(elem){
                if(elem &amp;&amp; elem.id &amp;&amp; elem.id!=&#x27;&#x27;){
                    elem.className = this.originalCssClasses[elem.id];
                }
             },
             //保存与在element上应用的动画class名称，用于在动画后删除相关的css
            pushAnimateClassName : function(id, className){
                if(id &amp;&amp; id!=&#x27;&#x27; &amp;&amp; className){
                    this.AnimatingClasses[id] = className;
                }
             },
            popAnimateClassName : function(id){
                if(id &amp;&amp; id!=&#x27;&#x27;){
                    var name = this.AnimatingClasses[id];
                    delete this.AnimatingClasses[id];

                    return name;
                }
             },
            /**
             * Initialize
             */
            init: function (params) {
                console.info(&quot;Initializing &quot; + this.name + &quot; (&quot; + this.description + &quot;) &quot; + this.version);

                this.initPrefix();

                if (params &amp;&amp; params.elems) {
                    this.elems = this.elements(params.elems);
                    //console.log(this.elems);
                }

                return core.effects;
            },
            composeTransformPropery : function(params){
                if(!params){
                    return;
                }
                var transform = &#x27;&#x27;,val;

                for(p in params){
                    switch(p){
                        case &#x27;perspective&#x27;:
                            val = etamina.format.toPixel(params.perspective);
                            transform +=&#x27;perspective(&#x27; + val + &#x27;)&#x27; + &#x27; &#x27;;
                            break;
                        case &#x27;translateX&#x27;:
                            val = etamina.format.toPixel(params.translateX);
                            transform +=&#x27;translateX(&#x27; + val + &#x27;)&#x27; + &#x27; &#x27;;    
                            break;
                        case &#x27;translateY&#x27;:
                            val = etamina.format.toPixel(params.translateY);
                            transform +=&#x27;translateY(&#x27; + val + &#x27;)&#x27; + &#x27; &#x27;;
                            break;
                        case &#x27;scaleX&#x27;:
                            val = params.scaleX;
                            transform +=&#x27;scaleX(&#x27; + val + &#x27;)&#x27; + &#x27; &#x27;;
                            break;
                        case &#x27;scaleY&#x27;:
                            val = params.scaleY;
                            transform +=&#x27;scaleY(&#x27; + val + &#x27;)&#x27; + &#x27; &#x27;;
                            break;
                        case &#x27;scale&#x27;:
                            val = params.scale;
                            transform +=&#x27;scale(&#x27; + val + &#x27;)&#x27; + &#x27; &#x27;;
                            break;
                        case &#x27;skewX&#x27;:
                            val = etamina.format.toDegree(params.skewX);
                            transform +=&#x27;skewX(&#x27; + val + &#x27;)&#x27; + &#x27; &#x27;;
                            break;
                        case &#x27;skewY&#x27;:
                            val = etamina.format.toDegree(params.skewY);
                            transform +=&#x27;skewY(&#x27; + val + &#x27;)&#x27; + &#x27; &#x27;;
                            break;
                        case &#x27;rotate&#x27;:
                            val = etamina.format.toDegree(params.rotate);
                            transform +=&#x27;rotate(&#x27; + val + &#x27;)&#x27; + &#x27; &#x27;;
                            break;
                        case &#x27;rotateX&#x27;:
                            val = etamina.format.toDegree(params.rotateX);
                            transform +=&#x27;rotateX(&#x27; + val + &#x27;)&#x27; + &#x27; &#x27;;
                            break;
                        case &#x27;rotateY&#x27;:
                            val = etamina.format.toDegree(params.rotateY);
                            transform +=&#x27;rotateY(&#x27; + val + &#x27;)&#x27; + &#x27; &#x27;;
                            break;
                   }

                }
                if(transform.length&gt;0){
                    return transform;
                }
                else{
                    return false;
                };

            },

            formatStep : function(step){

            }
        };

    return core;
}());

etamina.format = {
    isNumber : function(o) {
        return (o === 0 || o) &amp;&amp; o.constructor === Number;
    },
    isString : function(o) {
        return (o === &quot;&quot; || o) &amp;&amp; (o.constructor === String);
    },
    trim : function(string){
        return String(string).replace(/^\s+|\s+$/g, &#x27;&#x27;);
    },
    toPixel : function(param){
        var val = etamina.format.fromPixel(param);
        return val+&#x27;px&#x27;;
    },
    fromPixel : function(param){
        var pxStr,
            parseNum = function (num) {
                return num;
            },
            parseStr = function (str) {
                var val;
                if (str.indexOf(&quot;px&quot;) &gt; -1) {
                    val = parseInt(str, 10); // &quot;1000ms&quot;, &quot;1500ms&quot;
                }
                else {
                    val = parseInt(str, 10); // &quot;1000&quot;
                }
                return val;
            };


        switch (typeof param) {
        case &quot;number&quot;:
            pxStr = parseNum(param);
            break;
        case &quot;string&quot;:
            pxStr = parseStr(param);
            break;
        default:
            pxStr = parseStr(param);
        }
        return pxStr;
    },
    toDegree : function(param){
        var degStr = etamina.format.fromDegree(param);
        return degStr+&#x27;deg&#x27;;
    },
    fromDegree : function(param){
        var degStr,
            parseNum = function (num) {
                return num;
            },
            parseStr = function (str) {
                var val;
                if (str.indexOf(&quot;deg&quot;) &gt; -1) {
                    val = parseInt(str, 10); // &quot;1000ms&quot;, &quot;1500ms&quot;
                }
                else {
                    val = parseInt(str, 10); // &quot;1000&quot;
                }
                return val;
            };


        switch (typeof param) {
        case &quot;number&quot;:
            degStr = parseNum(param);
            break;
        case &quot;string&quot;:
            degStr = parseStr(param);
            break;
        default:
            degStr = parseStr(param);
        }
        return degStr;
    },

    fromTime : function(param){
    
        //console.info(&quot;duration&quot;, params, typeof params);
        var dur,
            parseNum = function (num) {
                return num;
            },
            parseStr = function (str) {
                var val;
                if (str.indexOf(&quot;ms&quot;) &gt; -1) {
                    val = parseInt(str, 10); // &quot;1000ms&quot;, &quot;1500ms&quot;
                }
                else if (str.indexOf(&quot;s&quot;) &gt; -1) {
                    val = parseFloat(str, 10) * 1000; // &quot;1s&quot;, &quot;1.5s&quot;
                }
                else {
                    val = parseInt(str, 10); // &quot;1000&quot;
                }
                return val;
            },
            parseObj = function (obj) {
                var val;
                if (obj.value) {
                    if (typeof obj.value === &quot;string&quot;) {
                        val = parseStr(obj.value);
                    }
                    else {
                        val = parseNum(obj.value); // {value: 2000}
                    }
                }
                return val;
            };

        switch (typeof param) {
        case &quot;number&quot;:
            dur = parseNum(param);
            break;
        case &quot;string&quot;:
            dur = parseStr(param);
            break;
        case &quot;object&quot;:
            dur = parseObj(param);
            break;
        default:
            dur = param;
        }

        //console.log(&quot;duration:&quot;, &quot;dur=&quot; + dur);
        return dur;
    },
    toMilliSecond:function(param){
        var val = etamina.format.fromTime(param);
        return val+&#x27;ms&#x27;;
    }
};

etamina.effects.buildframes = function(name,frames)
{
    if(!frames || frames.length&lt;2){
        return;
    }
    var 
        transform,transformOrigin,fade,shadow,
        css;

    css = &#x27;@&#x27;+etamina.prefix+&#x27;keyframes &#x27;+  name +&#x27;{\n&#x27;;

    for(var i=0, len = frames.length; i&lt;len; i++)
    {
        var f = frames[i];
        transform = etamina.composeTransformPropery(f);
        transformOrigin = (f.transformOrigin) ? f.transformOrigin:false;
        opacity = f.opacity;
        shadow = f.shadow;

        css +=                      &#x27;\t&#x27; + f.p +&#x27;{\n&#x27;;        
        css += (transform)?         &#x27;\t\t&#x27; + etamina.prefix + &#x27;transform:&#x27; + transform + &#x27;;&#x27; + &#x27;\n&#x27; : &#x27;&#x27;;
        css += (transformOrigin) ?  &#x27;\t\t&#x27; + etamina.prefix + &#x27;transform-origin:&#x27; + transformOrigin + &#x27;;&#x27; + &#x27;\n&#x27; : &#x27;&#x27;;
        css += (opacity) ?          &#x27;\t\t&#x27; + &#x27;opacity: &#x27; + opacity + &#x27;;&#x27; + &#x27;\n&#x27; : &#x27;&#x27;;
        css += (shadow) ?           &#x27;\t\t&#x27; + etamina.prefix + &#x27;box-shadow: &#x27; + shadow + &#x27;;&#x27; + &#x27;\n&#x27; : &#x27;&#x27;;
        css +=                      &#x27;\t&#x27; + &#x27;}&#x27; + &#x27;\n&#x27;;
    }

    css += &#x27;}\n&#x27;;

    return css;    
};

etamina.effects.buildUniqueKeyframeName = function(animType){

    return &#x27;etamina-&#x27;+animType+&#x27;-&#x27;+(new Date()).getTime() + &quot;-&quot; + Math.floor(Math.random() * 1000);
};



etamina.effects.go = function(elems,playParam,animSetting,getKeyframe){

//还需实现保持动画后状态的方法。

//优化点、针对多个元素应用动画时keyframe的css可能相同。

    playParam = etamina.initPlayParam(playParam,animSetting.animType);
    if(playParam.iteration&lt;1){
        return;
    }
    
    var animSetting = animSetting||{};

    var //循环变量
        elem,elemClass,keyframe,        
        elements = etamina.getHTMLelements(elems);



    // Loop through elements
    if (elements &amp;&amp; elements.length &gt; 0) {
        for (i = 0; i &lt; elements.length; i += 1) {

            elem = elements[i];
            animSetting.index = i;
            //检查并设置元素的动画状态
            if(etamina.animElementList[elem.id]){
                //忽略正在动画中的的元素。
                continue;
            }
            etamina.animElementList[elem.id] = true;



            //获取动画的具体keyframe的名称和代码。
            keyframe = getKeyframe(elem,animSetting); 
            if(animSetting.doNotDeleteKeyframe){
                etamina.doNotDeleteKeyframes[keyframe.name] = true;
            }

            //add css text into DOM style
            if(keyframe.css &amp;&amp; keyframe.css!=&#x27;&#x27;){
                if(etamina.debug){
                    console.log(keyframe.css);
                }
                etamina.insertCSS(keyframe.css);
            }

            //prepare class for element to play the animation.
            playParam.name = keyframe.name;
            elemClass = etamina.getAnimationClassRule(playParam,animSetting);
            //add css text into DOM style
            if(etamina.debug){
                console.log(elemClass.css);
            }
            if(elemClass.css &amp;&amp; elemClass.css!=&#x27;&#x27;){
                etamina.insertCSS(elemClass.css);
            }


            // Add listener to clear animation after it&#x27;s done
            if (etamina.prefix == &quot;-moz-&quot;) {
                elem.addEventListener(&quot;animationend&quot;, etamina.clearAnimation, false);
            }
            else {
                elem.addEventListener(etamina.prefixJS + &quot;AnimationEnd&quot;, etamina.clearAnimation, false);
            }
            //TODO: 是否在动画后保留结束时的状态。

            //保存elem原有的class，用于在动画后恢复。
            etamina.saveCssClass(elem);
            etamina.pushAnimateClassName(elem.id,elemClass.name)



            //apply css animation
            elem.className += &#x27; &#x27; + elemClass.name;

            if(animSetting.sound &amp;&amp; etamina.audio){

                var delayTime = etamina.format.fromTime(playParam.delay);

                if(delayTime&gt;0){
                    setTimeout(function(){
                        etamina.audio.playSound(animSetting.sound,animSetting.volume);
                    },delayTime);
                }
                else{
                    etamina.audio.playSound(animSetting.sound,animSetting.volume);
                }
            }

            console.log(elem.className);
        }       
    }

};

etamina.effects.goWithFixFrames = function(elems,playParam,animSetting,frames){

    var buildKeyframe = function(elem,animSetting){
            var index = animSetting.index;
            var keyframeName = etamina.effects.buildUniqueKeyframeName(animSetting.animType);
            return {
                name:keyframeName,
                css: etamina.effects.buildframes(keyframeName,frames)
            };
        };
    
    etamina.effects.go(elems,playParam,animSetting,buildKeyframe);
};

etamina.effects.applyCss = function(elems,playParam,animSetting){
    var animSetting = animSetting||{};
    var keyframeName;
    //字符串，表示关键帧的名字
    if(animSetting.constructor === String &amp;&amp; animSetting.length&gt;0){
        keyframeName = animSetting;
        animSetting = {};
        animSetting.name = keyframeName;
    }
    //对象格式，读取name属性
    else if(&#x27;name&#x27; in animSetting &amp;&amp; animSetting.name.length&gt;0){
        keyframeName = animSetting.name;
    }
    else{
        return;
    }

    animSetting.animType = &#x27;applyCss&#x27;;
    animSetting.doNotDeleteKeyframe = true;

    var buildKeyframe = function(){
        return {name:keyframeName};
    };

    etamina.effects.go(elems,playParam,animSetting,buildKeyframe);
}

etamina.effects.flash = function(elems,playParam,animSetting){

    var animSetting = animSetting||{};

    animSetting.animType = &#x27;flash&#x27;;

    var buildKeyframe = function(){
        var keyframeName = etamina.effects.buildUniqueKeyframeName(animSetting.animType);
   
            keyframeCss = &#x27;@&#x27;+etamina.prefix+&#x27;keyframes &#x27;+  keyframeName +&#x27;{\n&#x27;+
            &#x27;0%, 50%, 100% {opacity: 1;} \n&#x27; +
            &#x27;25%, 75% {opacity: 0;}\n&#x27; +
        &#x27;}&#x27;;

        return {
            name:keyframeName,
            css:keyframeCss
        };
    };

    etamina.effects.go(elems,playParam,animSetting,buildKeyframe);

};

etamina.effects.flipInY = function(elems,playParam,animSetting){
    var animSetting = animSetting || {}
        playParam = playParam||{};
    animSetting.animType = &#x27;flipInY&#x27;;
    playParam.toDelete = [&#x27;perspective&#x27;];

    var    frames = [
            {p:&#x27;0%&#x27;,rotateY:&#x27;90deg&#x27;,perspective:400,opacity:&#x27;0&#x27;},
            {p:&#x27;40%&#x27;,rotateY:&#x27;-10&#x27;,perspective:400},
            {p:&#x27;70%&#x27;,rotateY:&#x27;10&#x27;,perspective:400},
            {p:&#x27;100%&#x27;,rotateY:0,perspective:400,opacity:&#x27;1&#x27;}
        ];

    etamina.effects.goWithFixFrames(elems,playParam,animSetting,frames);


};
etamina.effects.flipInX = function(elems,playParam,animSetting){
    var animSetting = animSetting || {};
    animSetting.animType = &#x27;flipInX&#x27;;

    var    frames = [
            {p:&#x27;0%&#x27;,rotateX:&#x27;90deg&#x27;,perspective:400,opacity:&#x27;0&#x27;},
            {p:&#x27;40%&#x27;,rotateX:&#x27;-10&#x27;,perspective:400},
            {p:&#x27;70%&#x27;,rotateX:&#x27;10&#x27;,perspective:400},
            {p:&#x27;100%&#x27;,rotateX:0,perspective:400,opacity:&#x27;1&#x27;}
        ];

    etamina.effects.goWithFixFrames(elems,playParam,animSetting,frames);
};

//----------------------------------------------------------------------------


    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
